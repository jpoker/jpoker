<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JPoker</title>
</head>
<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript" src="/static/Requests.js"></script>
<script type="text/javascript">
    var socket = io();

    socket.on('userJoined', function (user) {
        appendUser(user.name);
    });

    function appendUser(name) {
        var newLi = document.createElement('li');
        var text = document.createTextNode(name);
        newLi.appendChild(text);
        document.getElementById('usersInTheRoom').appendChild(newLi);
    }

    function newSession(scrumMasterName) {
        var res = Request.PostNewSession(scrumMasterName, function (result) {
            var json = JSON.parse(result.responseText);
            document.getElementById('createSession').style.display = 'none';
            document.getElementById('inviteLink').href = json.joinURL;
            document.getElementById('inviteToSession').style.display = 'block';
            document.getElementById('joinedUsers').style.display = 'block';
        });
    };
</script>
<body>
    Welcome to <b>JPoker</b>

    <div id="createSession">
        <hr>
        <input type="button" value="new session" onclick="newSession(document.getElementById('masterName').value)" />

        <label for="masterName">Scrum Master:</label>
        <input id="masterName" name="masterName"/>
    </div>

    <div id="inviteToSession" style="display: none">
        <hr>
        Share this <a href="" id="inviteLink">link</a> to invite others.
    </div>

    <div id="joinedUsers" style="display: none">
        <hr/>
        These guys are in the room:
        <ul id="usersInTheRoom">
        </ul>
    </div>

</body>
</html>
